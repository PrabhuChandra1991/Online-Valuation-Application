<div class="container">
  <div class="row mt-2">
    <div class="col-lg-12 grid-margin stretch-card">
      <div class="card">
        <div class="card-body">
          <h4 class="card-title">Answersheet Management</h4>
          <div class="row">
            <!-- Institution -->
            <div class="col-md-2">
              <select
                id="institutionId"
                class="form-select"
                (change)="onInstituteChange($event)"
              >
                <option [value]="">Select Institution</option>
                <option
                  *ngFor="let inst of institutes"
                  [value]="inst.institutionId"
                >
                  {{ inst.name }}
                </option>
              </select>
            </div>
            <!-- Course -->
            <div class="col-md-4">
              <select
                id="courseId"
                class="form-select"
                (change)="onCourseChange($event)"
              >
                <option [value]="">Select Course</option>
                <option
                  *ngFor="let course of courses"
                  [value]="course.courseId"
                >
                  {{ course.name }} - ({{ course.code }})
                </option>
              </select>
            </div>
            <!-- Load Button -->
            <div class="col-md-2">
              <button
                type="submit"
                class="btn btn-primary"
                (click)="loadData()"
              >
                Load Data
              </button>
            </div>

            <!-- Search Input -->
            <div class="col-md-3">
              <mat-form-field appearance="outline">
                <mat-label>Search</mat-label>
                <input
                  matInput
                  (keyup)="applyFilter($event)"
                  placeholder="Search"
                />
              </mat-form-field>
            </div>

            <!-- Table -->
            <table
              mat-table
              [dataSource]="dataSource"
              matSort
              class="mat-elevation-z8"
            >
              <!-- Name Column -->
              <ng-container matColumnDef="institutionName">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                  Institution Name
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.institutionName }}
                </td>
              </ng-container>

              <ng-container matColumnDef="regulationYear">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                  Regulation
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.regulationYear }}
                </td>
              </ng-container>

              <ng-container matColumnDef="batchYear">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Batch</th>
                <td mat-cell *matCellDef="let element">
                  {{ element.batchYear }}
                </td>
              </ng-container>

              <ng-container matColumnDef="degreeTypeName">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                  Degree Type
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.degreeTypeName }}
                </td>
              </ng-container>

              <ng-container matColumnDef="examType">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                  Exam Type
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.examType }}
                </td>
              </ng-container>

              <ng-container matColumnDef="semester">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                  Semester
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.semester }}
                </td>
              </ng-container>

              <ng-container matColumnDef="courseCode">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                  Course Code
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.courseCode }}
                </td>
              </ng-container>

              <ng-container matColumnDef="examMonth">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                  Exam Month
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.examMonth }}
                </td>
              </ng-container>

              <ng-container matColumnDef="examYear">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                  Exam Year
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.examYear }}
                </td>
              </ng-container>

              <ng-container matColumnDef="dummyNumber">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                  Dummy Number
                </th>
                <td mat-cell *matCellDef="let element">
                  {{ element.dummyNumber }}
                </td>
              </ng-container>

              <!-- Table Header & Row Definitions -->
              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
            </table>
            <!-- Pagination -->
            <mat-paginator
              [pageSizeOptions]="[10, 20, 30, 50]"
              showFirstLastButtons
            ></mat-paginator>
          </div>
        </div>
      </div>
    </div>
   </div>
</div>
